/*
 * angular-ui-bootstrap
 * http://angular-ui.github.io/bootstrap/

 * Version: 0.13.0 - 2015-05-02
 * License: MIT
 */
angular.module("ui.bootstrap",["ui.bootstrap.tpls","ui.bootstrap.typeahead","ui.bootstrap.position","ui.bootstrap.bindHtml","ui.bootstrap.modal"]),angular.module("ui.bootstrap.tpls",["template/typeahead/typeahead-match.html","template/typeahead/typeahead-popup.html","template/modal/backdrop.html","template/modal/window.html"]),angular.module("ui.bootstrap.typeahead",["ui.bootstrap.position","ui.bootstrap.bindHtml"]).factory("typeaheadParser",["$parse",function(e){var t=/^\s*([\s\S]+?)(?:\s+as\s+([\s\S]+?))?\s+for\s+(?:([\$\w][\$\w\d]*))\s+in\s+([\s\S]+?)$/;return{parse:function(a){var n=a.match(t);if(!n)throw new Error('Expected typeahead specification in form of "_modelValue_ (as _label_)? for _item_ in _collection_" but got "'+a+'".');return{itemName:n[3],source:e(n[4]),viewMapper:e(n[2]||n[1]),modelMapper:e(n[1])}}}}]).directive("typeahead",["$compile","$parse","$q","$timeout","$document","$position","typeaheadParser",function(e,t,a,n,o,i,r){var l=[9,13,27,38,40];return{require:"ngModel",link:function(d,c,s,p){var u,m=d.$eval(s.typeaheadMinLength)||1,f=d.$eval(s.typeaheadWaitMs)||0,h=d.$eval(s.typeaheadEditable)!==!1,v=t(s.typeaheadLoading).assign||angular.noop,g=t(s.typeaheadOnSelect),y=s.typeaheadInputFormatter?t(s.typeaheadInputFormatter):void 0,$=s.typeaheadAppendToBody?d.$eval(s.typeaheadAppendToBody):!1,b=d.$eval(s.typeaheadFocusFirst)!==!1,w=t(s.ngModel).assign,k=r.parse(s.typeahead),x=d.$new();d.$on("$destroy",function(){x.$destroy()});var C="typeahead-"+x.$id+"-"+Math.floor(1e4*Math.random());c.attr({"aria-autocomplete":"list","aria-expanded":!1,"aria-owns":C});var U=angular.element("<div typeahead-popup></div>");U.attr({id:C,matches:"matches",active:"activeIdx",select:"select(activeIdx)",query:"query",position:"position"}),angular.isDefined(s.typeaheadTemplateUrl)&&U.attr("template-url",s.typeaheadTemplateUrl);var A=function(){x.matches=[],x.activeIdx=-1,c.attr("aria-expanded",!1)},T=function(e){return C+"-option-"+e};x.$watch("activeIdx",function(e){0>e?c.removeAttr("aria-activedescendant"):c.attr("aria-activedescendant",T(e))});var q=function(e){var t={$viewValue:e};v(d,!0),a.when(k.source(d,t)).then(function(a){var n=e===p.$viewValue;if(n&&u)if(a&&a.length>0){x.activeIdx=b?0:-1,x.matches.length=0;for(var o=0;o<a.length;o++)t[k.itemName]=a[o],x.matches.push({id:T(o),label:k.viewMapper(x,t),model:a[o]});x.query=e,x.position=$?i.offset(c):i.position(c),x.position.top=x.position.top+c.prop("offsetHeight"),c.attr("aria-expanded",!0)}else A();n&&v(d,!1)},function(){A(),v(d,!1)})};A(),x.query=void 0;var M,E=function(e){M=n(function(){q(e)},f)},S=function(){M&&n.cancel(M)};p.$parsers.unshift(function(e){return u=!0,e&&e.length>=m?f>0?(S(),E(e)):q(e):(v(d,!1),S(),A()),h?e:e?void p.$setValidity("editable",!1):(p.$setValidity("editable",!0),e)}),p.$formatters.push(function(e){var t,a,n={};return h||p.$setValidity("editable",!0),y?(n.$model=e,y(d,n)):(n[k.itemName]=e,t=k.viewMapper(d,n),n[k.itemName]=void 0,a=k.viewMapper(d,n),t!==a?t:e)}),x.select=function(e){var t,a,o={};o[k.itemName]=a=x.matches[e].model,t=k.modelMapper(d,o),w(d,t),p.$setValidity("editable",!0),p.$setValidity("parse",!0),g(d,{$item:a,$model:t,$label:k.viewMapper(d,o)}),A(),n(function(){c[0].focus()},0,!1)},c.bind("keydown",function(e){0!==x.matches.length&&-1!==l.indexOf(e.which)&&(-1!=x.activeIdx||13!==e.which&&9!==e.which)&&(e.preventDefault(),40===e.which?(x.activeIdx=(x.activeIdx+1)%x.matches.length,x.$digest()):38===e.which?(x.activeIdx=(x.activeIdx>0?x.activeIdx:x.matches.length)-1,x.$digest()):13===e.which||9===e.which?x.$apply(function(){x.select(x.activeIdx)}):27===e.which&&(e.stopPropagation(),A(),x.$digest()))}),c.bind("blur",function(){u=!1});var I=function(e){c[0]!==e.target&&(A(),x.$digest())};o.bind("click",I),d.$on("$destroy",function(){o.unbind("click",I),$&&H.remove(),U.remove()});var H=e(U)(x);$?o.find("body").append(H):c.after(H)}}}]).directive("typeaheadPopup",function(){return{restrict:"EA",scope:{matches:"=",query:"=",active:"=",position:"=",select:"&"},replace:!0,templateUrl:"template/typeahead/typeahead-popup.html",link:function(e,t,a){e.templateUrl=a.templateUrl,e.isOpen=function(){return e.matches.length>0},e.isActive=function(t){return e.active==t},e.selectActive=function(t){e.active=t},e.selectMatch=function(t){e.select({activeIdx:t})}}}}).directive("typeaheadMatch",["$templateRequest","$compile","$parse",function(e,t,a){return{restrict:"EA",scope:{index:"=",match:"=",query:"="},link:function(n,o,i){var r=a(i.templateUrl)(n.$parent)||"template/typeahead/typeahead-match.html";e(r).then(function(e){t(e.trim())(n,function(e){o.replaceWith(e)})})}}}]).filter("typeaheadHighlight",function(){function e(e){return e.replace(/([.?*+^$[\]\\(){}|-])/g,"\\$1")}return function(t,a){return a?(""+t).replace(new RegExp(e(a),"gi"),"<strong>$&</strong>"):t}}),angular.module("ui.bootstrap.position",[]).factory("$position",["$document","$window",function(e,t){function a(e,a){return e.currentStyle?e.currentStyle[a]:t.getComputedStyle?t.getComputedStyle(e)[a]:e.style[a]}function n(e){return"static"===(a(e,"position")||"static")}var o=function(t){for(var a=e[0],o=t.offsetParent||a;o&&o!==a&&n(o);)o=o.offsetParent;return o||a};return{position:function(t){var a=this.offset(t),n={top:0,left:0},i=o(t[0]);i!=e[0]&&(n=this.offset(angular.element(i)),n.top+=i.clientTop-i.scrollTop,n.left+=i.clientLeft-i.scrollLeft);var r=t[0].getBoundingClientRect();return{width:r.width||t.prop("offsetWidth"),height:r.height||t.prop("offsetHeight"),top:a.top-n.top,left:a.left-n.left}},offset:function(a){var n=a[0].getBoundingClientRect();return{width:n.width||a.prop("offsetWidth"),height:n.height||a.prop("offsetHeight"),top:n.top+(t.pageYOffset||e[0].documentElement.scrollTop),left:n.left+(t.pageXOffset||e[0].documentElement.scrollLeft)}},positionElements:function(e,t,a,n){var o,i,r,l,d=a.split("-"),c=d[0],s=d[1]||"center";o=n?this.offset(e):this.position(e),i=t.prop("offsetWidth"),r=t.prop("offsetHeight");var p={center:function(){return o.left+o.width/2-i/2},left:function(){return o.left},right:function(){return o.left+o.width}},u={center:function(){return o.top+o.height/2-r/2},top:function(){return o.top},bottom:function(){return o.top+o.height}};switch(c){case"right":l={top:u[s](),left:p[c]()};break;case"left":l={top:u[s](),left:o.left-i};break;case"bottom":l={top:u[c](),left:p[s]()};break;default:l={top:o.top-r,left:p[s]()}}return l}}}]),angular.module("ui.bootstrap.bindHtml",[]).directive("bindHtmlUnsafe",function(){return function(e,t,a){t.addClass("ng-binding").data("$binding",a.bindHtmlUnsafe),e.$watch(a.bindHtmlUnsafe,function(e){t.html(e||"")})}}),angular.module("ui.bootstrap.modal",[]).factory("$$stackedMap",function(){return{createNew:function(){var e=[];return{add:function(t,a){e.push({key:t,value:a})},get:function(t){for(var a=0;a<e.length;a++)if(t==e[a].key)return e[a]},keys:function(){for(var t=[],a=0;a<e.length;a++)t.push(e[a].key);return t},top:function(){return e[e.length-1]},remove:function(t){for(var a=-1,n=0;n<e.length;n++)if(t==e[n].key){a=n;break}return e.splice(a,1)[0]},removeTop:function(){return e.splice(e.length-1,1)[0]},length:function(){return e.length}}}}}).directive("modalBackdrop",["$timeout",function(e){function t(t){t.animate=!1,e(function(){t.animate=!0})}return{restrict:"EA",replace:!0,templateUrl:"template/modal/backdrop.html",compile:function(e,a){return e.addClass(a.backdropClass),t}}}]).directive("modalWindow",["$modalStack","$q",function(e,t){return{restrict:"EA",scope:{index:"@",animate:"="},replace:!0,transclude:!0,templateUrl:function(e,t){return t.templateUrl||"template/modal/window.html"},link:function(a,n,o){n.addClass(o.windowClass||""),a.size=o.size,a.close=function(t){var a=e.getTop();a&&a.value.backdrop&&"static"!=a.value.backdrop&&t.target===t.currentTarget&&(t.preventDefault(),t.stopPropagation(),e.dismiss(a.key,"backdrop click"))},a.$isRendered=!0;var i=t.defer();o.$observe("modalRender",function(e){"true"==e&&i.resolve()}),i.promise.then(function(){a.animate=!0;var t=n[0].querySelectorAll("[autofocus]");t.length?t[0].focus():n[0].focus();var o=e.getTop();o&&e.modalRendered(o.key)})}}}]).directive("modalAnimationClass",[function(){return{compile:function(e,t){t.modalAnimation&&e.addClass(t.modalAnimationClass)}}}]).directive("modalTransclude",function(){return{link:function(e,t,a,n,o){o(e.$parent,function(e){t.empty(),t.append(e)})}}}).factory("$modalStack",["$animate","$timeout","$document","$compile","$rootScope","$$stackedMap",function(e,t,a,n,o,i){function r(){for(var e=-1,t=f.keys(),a=0;a<t.length;a++)f.get(t[a]).value.backdrop&&(e=a);return e}function l(e){var t=a.find("body").eq(0),n=f.get(e).value;f.remove(e),c(n.modalDomEl,n.modalScope,function(){t.toggleClass(m,f.length()>0),d()})}function d(){if(p&&-1==r()){var e=u;c(p,u,function(){e=null}),p=void 0,u=void 0}}function c(a,n,i){function r(){r.done||(r.done=!0,a.remove(),n.$destroy(),i&&i())}n.animate=!1,a.attr("modal-animation")&&e.enabled()?a.one("$animate:close",function(){o.$evalAsync(r)}):t(r)}function s(e,t,a){return!e.value.modalScope.$broadcast("modal.closing",t,a).defaultPrevented}var p,u,m="modal-open",f=i.createNew(),h={};return o.$watch(r,function(e){u&&(u.index=e)}),a.bind("keydown",function(e){var t;27===e.which&&(t=f.top(),t&&t.value.keyboard&&(e.preventDefault(),o.$apply(function(){h.dismiss(t.key,"escape key press")})))}),h.open=function(e,t){var i=a[0].activeElement;f.add(e,{deferred:t.deferred,renderDeferred:t.renderDeferred,modalScope:t.scope,backdrop:t.backdrop,keyboard:t.keyboard});var l=a.find("body").eq(0),d=r();if(d>=0&&!p){u=o.$new(!0),u.index=d;var c=angular.element('<div modal-backdrop="modal-backdrop"></div>');c.attr("backdrop-class",t.backdropClass),t.animation&&c.attr("modal-animation","true"),p=n(c)(u),l.append(p)}var s=angular.element('<div modal-window="modal-window"></div>');s.attr({"template-url":t.windowTemplateUrl,"window-class":t.windowClass,size:t.size,index:f.length()-1,animate:"animate"}).html(t.content),t.animation&&s.attr("modal-animation","true");var h=n(s)(t.scope);f.top().value.modalDomEl=h,f.top().value.modalOpener=i,l.append(h),l.addClass(m)},h.close=function(e,t){var a=f.get(e);return a&&s(a,t,!0)?(a.value.deferred.resolve(t),l(e),a.value.modalOpener.focus(),!0):!a},h.dismiss=function(e,t){var a=f.get(e);return a&&s(a,t,!1)?(a.value.deferred.reject(t),l(e),a.value.modalOpener.focus(),!0):!a},h.dismissAll=function(e){for(var t=this.getTop();t&&this.dismiss(t.key,e);)t=this.getTop()},h.getTop=function(){return f.top()},h.modalRendered=function(e){var t=f.get(e);t&&t.value.renderDeferred.resolve()},h}]).provider("$modal",function(){var e={options:{animation:!0,backdrop:!0,keyboard:!0},$get:["$injector","$rootScope","$q","$templateRequest","$controller","$modalStack",function(t,a,n,o,i,r){function l(e){return e.template?n.when(e.template):o(angular.isFunction(e.templateUrl)?e.templateUrl():e.templateUrl)}function d(e){var a=[];return angular.forEach(e,function(e){(angular.isFunction(e)||angular.isArray(e))&&a.push(n.when(t.invoke(e)))}),a}var c={};return c.open=function(t){var o=n.defer(),c=n.defer(),s=n.defer(),p={result:o.promise,opened:c.promise,rendered:s.promise,close:function(e){return r.close(p,e)},dismiss:function(e){return r.dismiss(p,e)}};if(t=angular.extend({},e.options,t),t.resolve=t.resolve||{},!t.template&&!t.templateUrl)throw new Error("One of template or templateUrl options is required.");var u=n.all([l(t)].concat(d(t.resolve)));return u.then(function(e){var n=(t.scope||a).$new();n.$close=p.close,n.$dismiss=p.dismiss;var l,d={},c=1;t.controller&&(d.$scope=n,d.$modalInstance=p,angular.forEach(t.resolve,function(t,a){d[a]=e[c++]}),l=i(t.controller,d),t.controllerAs&&(n[t.controllerAs]=l)),r.open(p,{scope:n,deferred:o,renderDeferred:s,content:e[0],animation:t.animation,backdrop:t.backdrop,keyboard:t.keyboard,backdropClass:t.backdropClass,windowClass:t.windowClass,windowTemplateUrl:t.windowTemplateUrl,size:t.size})},function(e){o.reject(e)}),u.then(function(){c.resolve(!0)},function(e){c.reject(e)}),p},c}]};return e}),angular.module("template/typeahead/typeahead-match.html",[]).run(["$templateCache",function(e){e.put("template/typeahead/typeahead-match.html",'<a tabindex="-1" bind-html-unsafe="match.label | typeaheadHighlight:query"></a>')}]),angular.module("template/typeahead/typeahead-popup.html",[]).run(["$templateCache",function(e){e.put("template/typeahead/typeahead-popup.html",'<ul class="dropdown-menu" ng-show="isOpen()" ng-style="{top: position.top+\'px\', left: position.left+\'px\'}" style="display: block;" role="listbox" aria-hidden="{{!isOpen()}}">\n    <li ng-repeat="match in matches track by $index" ng-class="{active: isActive($index) }" ng-mouseenter="selectActive($index)" ng-click="selectMatch($index)" role="option" id="{{match.id}}">\n        <div typeahead-match index="$index" match="match" query="query" template-url="templateUrl"></div>\n    </li>\n</ul>\n')}]),angular.module("template/modal/backdrop.html",[]).run(["$templateCache",function(e){e.put("template/modal/backdrop.html",'<div class="modal-backdrop"\n     modal-animation-class="fade"\n     ng-class="{in: animate}"\n     ng-style="{\'z-index\': 1040 + (index && 1 || 0) + index*10}"\n></div>\n')}]),angular.module("template/modal/window.html",[]).run(["$templateCache",function(e){e.put("template/modal/window.html",'<div modal-render="{{$isRendered}}" tabindex="-1" role="dialog" class="modal"\n    modal-animation-class="fade"\n	ng-class="{in: animate}" ng-style="{\'z-index\': 1050 + index*10, display: \'block\'}" ng-click="close($event)">\n    <div class="modal-dialog" ng-class="size ? \'modal-\' + size : \'\'"><div class="modal-content" modal-transclude></div></div>\n</div>\n')}]);